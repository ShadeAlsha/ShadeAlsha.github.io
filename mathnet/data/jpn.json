{
  "2024": [
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_e1b87779d560",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "We have\n\n\\[\n\\begin{align*}\n\\sqrt{\\frac{123!}{122! - 121!}} &= \\sqrt{\\frac{123 \\cdot 122! - 122!}{122 \\cdot 121! - 121!}} = \\sqrt{\\frac{(123 - 1) \\cdot 122!}{(122 - 1) \\cdot 121!}} \\\\\n&= \\sqrt{\\frac{122 \\cdot 122 \\cdot 121!}{121 \\cdot 121!}} = \\sqrt{\\frac{122^2}{121}} = \\frac{122}{11}.\n\\end{align*}\n\\]\n\nSince 122 and 11 are coprime, the answer is $\\frac{122}{11}$.",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "1.\n\n\\[\n\\boxed{\\frac{122}{11}}\n\\]\n\nWe have\n\n\\[\n\\begin{align*}\n\\sqrt{\\frac{123!}{122! - 121!}} &= \\sqrt{\\frac{123 \\cdot 122! - 122!}{122 \\cdot 121! - 121!}} = \\sqrt{\\frac{(123 - 1) \\cdot 122!}{(122 - 1) \\cdot 121!}} \\\\\n&= \\sqrt{\\frac{122 \\cdot 122 \\cdot 121!}{121 \\cdot 121!}} = \\sqrt{\\frac{122^2}{121}} = \\frac{122}{11}.\n\\end{align*}\n\\]\n\nSince 122 and 11 are coprime, the answer is $\\frac{122}{11}$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_bd94b6d237c1",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Let $a, b$ and $c$ be each digit of $n$ in the hundreds, tens, and ones place respectively, then $n$ is described as $n = 100a + 10b + c$. Both $n + 2024$ and $n - 34$ have a prime number in the ones place, hence $c$ is 1 or 9.\n\nIn the case of $c = 1$, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 10(b + 2) + 5, \\quad n - 34 = 100a + 10(b - 4) + 7\n\\]\n\nhave a prime number in tens place, hence $b = 1$. Similarly, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 35, \\quad n - 34 = 100(a - 1) + 77\n\\]\n\nhave a prime number in the hundreds place, hence $a = 3$. Therefore, $n = 311$, and this $n$ satisfies the condition since $n + 2024 = 2335$ and $n - 34 = 277$.\n\nIn the case of $c = 9$, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 10(b + 3) + 3, \\quad n - 34 = 100a + 10(b - 3) + 5\n\\]\n\nhave a prime number in the tens place, hence $b = 0$. Similarly, both integers\n\n$n + 2024 = 100(a + 20) + 33, \\quad n - 34 = 100(a - 1) + 75$\n\nhave a prime number in the hundreds place, hence $a = 3$. Therefore $n = 309$, and this $n$ satisfies the condition since $n + 2024 = 2333$ and $n - 34 = 275$.\n\nWe have proved that the two integers $n$ satisfying the condition are $309, 311$.",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "2.\n\n\\[\n\\boxed{309, 311}\n\\]\n\nLet $a, b$ and $c$ be each digit of $n$ in the hundreds, tens, and ones place respectively, then $n$ is described as $n = 100a + 10b + c$. Both $n + 2024$ and $n - 34$ have a prime number in the ones place, hence $c$ is 1 or 9.\n\nIn the case of $c = 1$, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 10(b + 2) + 5, \\quad n - 34 = 100a + 10(b - 4) + 7\n\\]\n\nhave a prime number in tens place, hence $b = 1$. Similarly, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 35, \\quad n - 34 = 100(a - 1) + 77\n\\]\n\nhave a prime number in the hundreds place, hence $a = 3$. Therefore, $n = 311$, and this $n$ satisfies the condition since $n + 2024 = 2335$ and $n - 34 = 277$.\n\nIn the case of $c = 9$, both integers\n\n\\[\nn + 2024 = 100(a + 20) + 10(b + 3) + 3, \\quad n - 34 = 100a + 10(b - 3) + 5\n\\]\n\nhave a prime number in the tens place, hence $b = 0$. Similarly, both integers\n\n$n + 2024 = 100(a + 20) + 33, \\quad n - 34 = 100(a - 1) + 75$\n\nhave a prime number in the hundreds place, hence $a = 3$. Therefore $n = 309$, and this $n$ satisfies the condition since $n + 2024 = 2333$ and $n - 34 = 275$.\n\nWe have proved that the two integers $n$ satisfying the condition are $309, 311$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_006b9ae16041",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let $x = BX$. Since $CX = 10 - x$ and $BX > CX$, we have $5 < x < 10$. By the power of a point theorem,\n\n$$\nx^2 + (10-x)^2 = BX^2 + CX^2 = BD \\cdot BA + CE \\cdot CA = 10(BD + CE)\n$$\n\nholds. Also, from the condition $AD + AE = 13$, we find\n\n$$\nBD + CE = (10 - AD) + (10 - AE) = 20 - (AD + AE) = 7\n$$\n\nand thus\n\n$$\nx^2 + (10 - x)^2 = 70\n$$\n\nSince $5 < x < 10$, this yields $x = 5 + \\sqrt{10}$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_4a9495a5ff5d",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let $k$ be a positive integer. Consider arranging black and white stones in a single row, with a total of $5^k$ stones. Define a **bad arrangement** as one where, after $k$ repetitions of an operation, the last remaining stone is white.\n\nDefine $f(k)$ as the minimum non-negative integer $m$ such that a bad arrangement can be formed with $5^k - m$ black stones and $m$ white stones. Obviously, $f(1) = 3$. If $m \\ge f(k)$, then there exists a bad arrangement with $5^k - m$ black stones and $m$ white stones.\n\nNow, if $n \\ge 5^5 - f(5) + 1$, then there are at most $f(5) - 1$ white stones, and since no bad arrangement exists, the last remaining stone must be a black stone. Conversely, if $n \\le 5^5 - f(5)$, then there are $f(5)$ or more white stones, and there exists an arrangement where the last remaining stone is a white stone. Therefore, the desired value is $5^5 - f(5) + 1$. Thus, we will consider expressing $f(k+1)$ in terms of $f(k)$ for $k \\ge 1$.\n\nConsider a bad arrangement $W_k$ with $5^k - f(k)$ black stones and $f(k)$ white stones. Now, arrange $2 \\cdot 5^k$ black stones in the beginning, followed by three instances of $W_k$, forming a row of $5^{k+1}$ stones. The number of white stones in this row is $3f(k)$. After $k$ repetitions of the operation, the final arrangement consists of black, black, white, white, white stones, ensuring that the last remaining stone is white. Therefore, $f(k+1) \\le 3f(k)$.\n\nConversely, consider a row of $5^{k+1}$ stones where there are at most $3f(k) - 1$ white stones. Divide this row into sets of $5^k$ stones each. Since there are fewer than $3f(k)$ white stones, there can be at most 2 sets with $f(k)$ or more white stones. From the minimality of $f(k)$, after $k$ repetitions of the operation, there can be at most 2 white stones among the last 5 remaining stones. Thus, the last remaining stone is black, implying $f(k+1) > 3f(k) - 1$.\n\nHence, we have $f(k+1) = 3f(k)$. Since $f(5) = 3^4 \\cdot f(1) = 3^5$, the desired value is $5^5 - f(5) + 1 = 2883$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_931b221b96cc",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Solving this equation with the condition $x > 0$, we get $x = \\frac{2\\sqrt{65}}{13}$. Thus, we conclude that\n\n$$\nBC = BE + EC = 7x = \\frac{14\\sqrt{65}}{13}.\n$$",
          "pages": [
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "6. \\frac{14\\sqrt{65}}{13}\n\nBy the alternate segment theorem and the assumption $AB = AC$, we have $\\angle EFB = \\angle EBA = \\angle ACB$. Therefore, the four points A, B, F, C are concyclic.\n\nLet $X$ be any point on the tangent to $\\omega$ at $E$, lying on the same side of line $AF$ as $B$. Then, by the alternate segment theorem, we have\n\n$$\n\\angle DEB = \\angle DEX + \\angle XEB = \\angle DAE + \\angle EFB = \\angle DAE + \\angle EBA = \\angle CEA.\n$$\n\nSince $\\angle DBE = \\angle ACE$, we conclude that triangles $DEB$ and $AEC$ are similar. Therefore, we have $EB : EC = DB : AC = 2 : 5$. Hence, we may write $EB = 2x$ and $EC = 5x$ with some $x > 0$.\n\nSince A, B, F, C are concyclic, triangles $EBA$ and $EFC$ are similar. Therefore, we have\n\n$$\nEB : EF = EA : EC = AB : CF = 5 : 10 = 1 : 2,\n$$\n\nand hence, we have $EF = 4x$ and $EA = \\frac{5}{2}x$. By the power of a point theorem, we have\n\n$$\n25 = AB^2 = AE \\cdot AF = \\frac{5}{2} \\cdot \\frac{13}{2}x.\n$$"
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_86edbe25a7fc",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "We consider the case $f(0) = 2$. $P(0, 1)$ implies $f(1)^2 = f(1)+2$, thus we have $f(1) \\in \\{-1, 2\\}$. If $f(1) = -1$, $P(1, 1)$ implies $f(2)^2 = -2$ which contradicts $f(2) \\in \\mathbb{Z}$. Therefore we have $f(1) = 2$. Then $P(m, 1)$ and $P(m, 0)$ imply that $f(m+1)^2 = f(2m)+2 = f(m)^2$. By induction we have $|f(m)| = 2$ for any $m \\in \\mathbb{N}_0$. Moreover, $f(2m) = f(m)^2 - 2 = 2$ holds. On the other hand, $P(0, n)$ implies $f(n^2) = f(n)^2 - f(0) = 2$ for any $n \\in \\mathbb{N}_0$.\n\nConversely, if we choose $f: \\mathbb{N}_0 \\to \\{-2, 2\\}$ so that $f(n) = 2$ whenever $n$ is even or square, $f$ satisfies the condition because $f(m+n)^2 = 4$, $f(m|f(n)|) = f(2m) = 2$ and $f(n^2) = 2$ for any $m, n \\in \\mathbb{N}_0$. Since there exist 990 integers between 0 to 2024 which are neither even nor square, the number of possible tuples $(f(0), f(1), \\dots, f(2024))$ in this case is $2^{990}$.\n\nTherefore the answer is $2^{990} + 1$.",
          "pages": [
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Denote the equation $f(m + n)^2 = f(m|f(n)|) + f(n^2)$ by $P(m, n)$. $P(0, 0)$ implies $f(0)^2 = 2f(0)$, thus $f(0) \\in \\{0, 2\\}$.\n\nWhen $f(0) = 0$, $P(m, 0)$ implies $f(m) = 0$ for any $m \\in \\mathbb{N}_0$. Since this $f$ satisfies the condition, there is just one possible tuple $(f(0), f(1), \\dots, f(2024))$ in this case."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_f6d60d294c5d",
      "language": "und",
      "page numbers": [
        0,
        1,
        2
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "By this way of filling, the squares within the same block have the same letter. On the other hand, two squares in adjacent blocks have different letters since adjacent letters in the sequence $a_1, \\dots, a_{101}$ are different.\n\n**Lemma 1.** This way of filling satisfies the first condition of the problem.\n\n**Proof of Lemma 1.** We fix a $2 \\times 2$ square in the $100 \\times 100$ table. Let $N$ be the number of chosen grid lines passing through the interior of the $2 \\times 2$ square. The possibility of $N$ is either $N=0, 1, 2$. When $N=0$, the $2 \\times 2$ square is contained in one block, and the four squares have exactly one type of letter. When $N=1$, the $2 \\times 2$ square crosses over two blocks. In this case, the four squares in the $2 \\times 2$ square have exactly two types of letters, and each letter appears twice. When $N=2$, the $2 \\times 2$ square crosses over four blocks. Let $[i, j]$ be the block containing the upper-right square of the $2 \\times 2$ square. Then, the block $[i+1, j-1]$ contains the lower-left square of the $2 \\times 2$ square. By the way of filling, those two squares have the same letter. In any case, it has been shown that the $2 \\times 2$ square is a good block, which completes the proof of Lemma 1. \\u25a0\n\n**Lemma 2.** This way of filling satisfies the second condition of the problem.\n\n**Proof of Lemma 2.** By the way of filling, for a pair of two adjacent squares of the table, the following two conditions are equivalent:\n\n* The two squares have different letters.\n\n* The two squares are separated by one of the chosen 100 grid lines.\n\nTherefore, we conclude that there are exactly $100 \\cdot 100 = 10000$ pairs whose two squares have different letters, which completes the proof of Lemma 2. \\u25a0\n\nThus, we have established a way of filling from a choice of 100 grid lines and a choice of a sequence. Since different choices give different fillings, we have proved that there are at least $\\binom{198}{100} \\cdot 3 \\cdot 2^{100}$ possible ways of filling satisfying the two conditions.\n\n**STEP 2** We suppose that the squares of the $100 \\times 100$ table are filled to satisfy the two conditions. In this step, we will prove that such way of filling is one of the ways given in STEP 1.\n\nLet $(i, j)$ denote the square in the $i$-th row from the top and $j$-th column from the left. Furthermore, $f(i, j)$ denotes the letter written in the square $(i, j)$.\n\nFirst, we will prove the following two lemmas.\n\n**Lemma 3.** Let $a$ and $b$ be integers satisfying $1 \\le a, b \\le 99$. Then, the two conditions $f(a, b) = f(a, b+1)$ and $f(a+1, b) = f(a+1, b+1)$ are equivalent. Furthermore, the two conditions $f(a, b) = f(a+1, b)$ and $f(a, b+1) = f(a+1, b+1)$ are equivalent.\n\n**Proof of Lemma 3.** We will show that $f(a, b) = f(a, b+1)$ implies $f(a+1, b) = f(a+1, b+1)$. Let $N$ denote the number of types of letters written in the four squares $(a, b), (a, b+1), (a+1, b), (a+1, b+1)$. Here, we have $N \\le 3$ by the definition of a good block. If $N=1$, then we have $f(a+1, b) = f(a+1, b+1)$ and it shows the assertion. If $N=2$, then each letter appears exactly twice by the definition of a good block, and hence, we conclude that $f(a, b) = f(a, b+1)$ implies $f(a+1, b) = f(a+1, b+1)$. If $N=3$, then we have $f(a+1, b) = f(a, b+1)$ by the definition of a good block. Since $N=3$, we have $f(a, b) \\neq f(a, b+1)$ and it shows the assertion.\n\nWe have proved that $f(a, b) = f(a, b+1)$ implies $f(a+1, b) = f(a+1, b+1)$. The other implications can be proved similarly. \\u25a0\n\n**Lemma 4.** Let $a$ and $b$ be integers satisfying $1 \\le a, b \\le 99$. If\n\n$$\nf(a,b) \\neq f(a,b+1) \\neq f(a+1,b+1) \\neq f(a+1,b) \\neq f(a,b),\n$$\n\nthen we have $f(a+1, b) = f(a, b+1)$.\n\n**Proof of Lemma 4.** Let $N$ denote the number of types of letters written in the four squares $(a, b)$, $(a, b+1)$, $(a+1, b)$, and $(a+1, b+1)$. Here, we have $N \\le 3$ by the definition of a good block, and $N \\ge 2$ by the assumption $f(a, b) \\neq f(a, b+1)$. When $N=2$, the assertion $f(a+1, b) = f(a, b+1)$ follows from the assumption $f(a, b) \\neq f(a, b+1) \\neq f(a+1, b+1)$. When $N=3$, the assertion $f(a+1, b) = f(a, b+1)$ follows from the definition of a good block. \\u25a0\n\nWhen two squares sharing an edge have different letters, we call such shared edge a **boundary edge**. From Lemma 3, for each integer $a$ with $1 \\le a \\le 99$, we conclude that either\n\n* all edges shared by a square on the $a$-th row and a square on the $(a+1)$-th row are boundary edges, or\n\n* none of them are boundary edges.\n\nThe same assertion holds for columns as well. Therefore, the union of the boundary edges forms a collection of some of the grid lines $\\ell_1, \\dots, \\ell_{99}, \\ell'_1, \\dots, \\ell'_{99}$. Let $s$ denote the number of horizontal grid lines obtained by the horizontal boundary edges, and let $t$ denote the number of vertical grid lines obtained by the vertical boundary edges. Then, by the boundary edges, the $100 \\times 100$ table is divided into $(s+1)(t+1)$ many rectangular-shaped blocks. By the definition of a boundary edge, the squares within the same block have the same letter, and two squares in adjacent blocks have different letters. Therefore, the number of pairs of adjacent squares sharing a boundary edge is exactly $100(s+t)$. Hence, by the second condition of the problem, we conclude that $t = 100-s$.\n\nFor $1 \\le i \\le s+1$ and $1 \\le j \\le t+1 = 101-s$, let $[i, j]$ denote the block located at the $i$-th row from the top and the $j$-th column from the left. Note that the squares in the block $[i, j]$ have the same letter, and we denote the letter by $g(i, j)$. We define a sequence $a_1, \\dots, a_{101}$ of letters J, M, and O by\n\n$$\na_1 = g(1, 1), \\quad a_2 = g(2, 1), \\quad \\dots, \\quad a_{s+1} = g(s+1, 1), \\\\ a_{s+2} = g(s+1, 2), \\quad \\dots, \\quad a_{101} = g(s+1, t+1).\n$$\n\nThen, adjacent letters of the sequence are different.",
          "pages": [
            "P1",
            "P2"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "10.\n\n\\begin{tabular}{|c|}\\hline (198) \\\\ \\hline 100 \\\\ \\hline\\end{tabular} $\\cdot 3 \\cdot 2^{100}$\n\n**STEP 1** In this step, we give $\\binom{198}{100} \\cdot 3 \\cdot 2^{100}$ possible ways of filling satisfying the two conditions. Let $\\ell_1, \\dots, \\ell_{99}$ be the horizontal grid lines of the table, and let $\\ell'_1, \\dots, \\ell'_{99}$ be the vertical grid lines of the table. We have exactly $\\binom{198}{100}$ ways to choose 100 lines from 198 lines $\\ell_1, \\dots, \\ell_{99}, \\ell'_1, \\dots, \\ell'_{99}$. Furthermore, there are $3 \\cdot 2^{100}$ sequences $a_1, \\dots, a_{101}$ of letters J, M, and O such that adjacent letters are different. We fix one way of choosing 100 grid lines and one sequence $a_1, \\dots, a_{101}$. For these choices, we give a way of filling the 100 $\\times$ 100 table as follows:\n\nLet $s$ be the number of the horizontal grid lines among the chosen 100 grid lines. Then, there are $100-s$ vertical grid lines among the chosen 100 lines, and the $100 \\times 100$ table is divided into $(s+1)(101-s)$ many rectangular-shaped blocks. For $1 \\le i \\le s+1$ and $1 \\le j \\le 101-s$, let $[i, j]$ denote the block located at the $i$-th row from the top and the $j$-th column from the left. Then, for each $i$ and $j$, we fill the squares in the block $[i, j]$ with the letter $a_{i+j-1}$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_5c1f163bc859",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "On the other hand, define:\n\n$$\ng(x) = \\begin{cases} \\frac{k}{2} + 150 - x & (100 \\le x \\le 149) \\\\ \\frac{k}{2} + x - 149 & (150 \\le x \\le 199) \\\\ x + k & \\text{(other cases).} \\end{cases}\n$$\n\nBy considering each of three cases, it can be seen that for any positive integer $x$, $g(x) + x \\ge \\frac{k}{2} + 150$ and $\\frac{k}{2} - 149 \\le g(x) - x \\le k$. Therefore, for any positive integers $a, b, c$,\n\n$$\n(g(b) - b) - (g(a) - a) \\le k - \\left(\\frac{k}{2} - 149\\right) < \\frac{k}{2} + 150 \\le g(c) + c\n$$\n\nholds, and since $g(34) = k + 34$, $g$ satisfies the conditions of the problem. For this function $g$, $g(100)+g(101)+\\cdots+g(199) = 50k+2550$ holds, so the minimum to find is $50k+2550 = 102050$.",
          "pages": [
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "The existence of a triangle with side lengths $a + f(b)$, $b + f(c)$, $c + f(a)$ is equivalent to the following conditions:\n\n$$\n\\begin{cases} a + f(b) < b + f(c) + c + f(a), \\\\ b + f(c) < c + f(a) + a + f(b), \\\\ c + f(a) < a + f(b) + b + f(c). \\end{cases}\n$$\n\nBy symmetry of $a, b, c$, the existence of a triangle with side lengths $a + f(b)$, $b + f(c)$, $c + f(a)$ for any positive integers $a, b, c$ is equivalent to the condition that for any positive integers $a, b, c$, we have $a + f(b) < b + f(c) + c + f(a)$, or equivalently,\n\n$$\n(f(b) - b) - (f(a) - a) < f(c) + c. \\quad (*)\n$$\n\nBy considering the cases where $a = c = 1$ and $b = c = 1$ in $(*)$, we can establish that $-2 < f(x) - x < 2f(1)$ holds for any positive integer $x$. Consequently, $f(x) - x$ has both a minimum and a maximum value. Denote the minimum and the maximum values as $m$ and $M$ respectively, and let $r = M - m$. Then, from $(*)$, we have $f(x) + x > r$, which implies $f(x) \\ge r - x + 1$. Furthermore, let $k = f(34) - 34 = 1990$. Since $M \\ge k$, it follows that $m = M - r \\ge k - r$. Thus, for any positive integer $x$, we have $f(x) - x \\ge k - r$, or equivalently, $f(x) \\ge k + x - r$.\n\nTherefore, we have:\n\n$$\n\\begin{aligned} f(100) &\\ge r - 99, & f(101) &\\ge r - 100, & \\dots, & f(149) &\\ge r - 148, \\\\ f(150) &\\ge k + 150 - r, & f(151) &\\ge k + 151 - r, & \\dots, & f(199) &\\ge k + 199 - r. \\end{aligned}\n$$\n\nSince all these inequalities hold, summing them up, we obtain $f(100) + f(101) + \\dots + f(199) \\ge 50k + 2550$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_3072c2bdbfcb",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "**Proof of Lemma 1.**\n\n(1) Since $m$ and $n$ are coprime, $g(mn) = g(m)g(n)$. Since $g(m)$ and $g(n)$ are also coprime, $\\omega(g(m)g(n)) = \\omega(g(m)) + \\omega(g(n))$. Therefore,\n\n$$\n\\mu(mn) = (-1)^{\\omega(g(mn))} = (-1)^{\\omega(g(m))+\\omega(g(n))} = (-1)^{\\omega(g(m))}(-1)^{\\omega(g(n))} = \\mu(m)\\mu(n)\n$$\n\nfollows.\n\n(2) The case of $n=1$ is obvious. Assume $n \\ge 2$. We write $n = 2^{e_2}3^{e_3}5^{e_5}7^{e_7}$ with $e_2, e_3, e_5, e_7 \\in \\{0, 1\\}$. By property (1),\n\n$$\n\\sum_{x|n} \\mu(x) = \\left( \\sum_{0 \\le e_2 \\le e_1} \\mu(2^{e_2}) \\right) \\left( \\sum_{0 \\le e_3 \\le e_1} \\mu(3^{e_3}) \\right) \\left( \\sum_{0 \\le e_5 \\le e_1} \\mu(5^{e_5}) \\right) \\left( \\sum_{0 \\le e_7 \\le e_1} \\mu(7^{e_7}) \\right).\n$$\n\nSince $n \\ge 2$, we can take $q \\in \\{2, 3, 5, 7\\}$ with $e_q = 1$, which satisfies $\\mu(q^0) + \\mu(q^1) = 0$.\n\nTherefore, $\\sum_{x|n} \\mu(x) = 0$ holds for $n \\ge 2$.",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "There exists some tuple $(c_1, c_2, \\dots, c_M)$ of integers from 0 to 2099 such that $a_i = \\sum_{j \\le i \\le M} c_j$ holds for any integer $i$ from 1 to $M$.\n\n$$\n\\text{gcd}(j-i, M)=1 \\\\ 1 \\le j \\le M\n$$\n\nIn the following, a tuple of $M$ integers from 0 to 2099 is called a good tuple, and for simplicity, we write $(A_i)$ to represent a good tuple $(A_1, A_2, \\dots, A_M)$. We also define that $A_{k+M} = A_k$ for any good tuple $(A_i)$ and any positive integer $k$. Additionally, $i$ will represent an integer from 1 to $M$ and $g(i)$ will denote $\\text{gcd}(i, M)$ hereinafter.\n\nIf good tuples $(S_i)$ and $(s_i)$ satisfy the following condition, $(S_i)$ is called the parent of $(s_i)$ and $(s_i)$ is called a child of $(S_i)$, respectively:\n\n$$\nS_i = \\sum_{j=0}^{g(i)-1} s_{i+\\frac{M}{g(i)}j}\n$$\n\nFurthermore, a good tuple $(s'_i)$ is called the inverse of $(s_i)$ if they satisfy the following condition:\n\n$$\ns'_{i} = \\sum_{\\substack{M \\mid j(j-i) \\\\ 1 \\le j \\le M}} \\mu(j)s_j.\n$$\n\nHere, $\\omega(n)$ denotes the number of distinct prime factors of $n$, and $\\mu(n)$ is defined by $\\mu(n) = (-1)^{\\omega(g(n))}$.\n\n**Lemma 1.** $\\mu(n)$ satisfies the following two properties.\n\n(1) For coprime positive integers $m$ and $n$, $\\mu(mn) = \\mu(m)\\mu(n)$.\n\n(2) For a positive divisor $n$ of $M$,\n\n$$\n\\sum_{x|n} \\mu(x) = \\begin{cases} 1 & (n=1), \\\\ 0 & (n \\ge 2). \\end{cases}\n$$"
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_22208e462d29",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "(1) Note that, since there are only finite good tuples, it suffices to show that the number of child for a given good tuple is at most one. To be more precise, we show that if $(S_i)$ and $(T_i)$ are the parents of $(s_i)$ and $(t_i)$, respectively, then $(S_i) = (T_i)$ $\\Rightarrow$ $(s_i) = (t_i)$.\n\nSuppose otherwise, i.e., $(S_i) = (T_i)$ and there exists an $i$ such that $s_i \\neq t_i$. Without loss of generality, we can assume that $i$ is the smallest among such integers. Since $\\text{gcd}(g(i), \\frac{M}{g(i)}) = \\text{gcd}(i, \\frac{M}{g(i)}) = 1$ and $g(i) \\mid i$, it holds for any integer $j$ that\n\n$$\n\\begin{aligned}\ng\\left(i + \\frac{M}{g(i)}j\\right) &= \\text{gcd}\\left(g(i) \\cdot \\frac{M}{g(i)}, i + \\frac{M}{g(i)}j\\right) \\\\\n&= \\text{gcd}\\left(g(i), i + \\frac{M}{g(i)}j\\right) \\text{gcd}\\left(\\frac{M}{g(i)}, i + \\frac{M}{g(i)}j\\right) \\\\\n&= \\text{gcd}\\left(g(i), \\frac{M}{g(i)}j\\right) \\text{gcd}\\left(\\frac{M}{g(i)}, i\\right) \\\\\n&= \\text{gcd}(g(i), j).\n\\end{aligned}\n$$\n\nTherefore, for $1 \\le j \\le g(i) - 1$, $g\\left(i + \\frac{M}{g(i)}j\\right) < g(i)$ and thus $s_{i+\\frac{M}{g(i)}j} = t_{i+\\frac{M}{g(i)}j}$ by the minimality of $g(i)$. Hence,\n\n$$\ns_i \\equiv S_i - \\sum_{j=1}^{g(i)-1} s_{i+\\frac{M}{g(i)}j} \\equiv T_i - \\sum_{j=1}^{g(i)-1} t_{i+\\frac{M}{g(i)}j} \\equiv t_i,\n$$\n\nwhich contradicts the assumption that $s_i \\neq t_i$.\n\n(2) Similarly to (1), let $(s'_i)$ and $(t'_i)$ be the inverses of $(s_i)$ and $(t_i)$, respectively, and it suffices to show that $(s'_i) = (t'_i) \\Rightarrow (s_i) = (t_i)$.\n\nSuppose $(s'_i) = (t'_i)$ and there exists an $i$ such that $s_i \\neq t_i$. Again, we can assume that $i$ is the smallest among such integers without loss of generality. Since $g(i) \\mid M$, if $1 \\le j \\le M$ and $M \\mid j(j - i)$, then $j^2 \\equiv j(j - i) \\equiv 0 \\pmod{g(i)}$. Since $g(i)$ is square-free, we have $g(i) \\mid j$ and thus $g(i) \\mid g(j)$. Noting that $g(j) > g(i) \\Rightarrow s_j = t_j$ from the maximality of $g(i)$, $s'_i = t'_i$ means\n\n$$\n\\begin{align*}\n\\sum_{\\substack{M \\mid j(j-i), g(j)=g(i) \\\\ 1 \\le j \\le M}} \\mu(j) s_j &\\equiv \\sum_{\\substack{M \\mid j(j-i) \\\\ 1 \\le j \\le M}} \\mu(j) s_j - \\sum_{\\substack{M \\mid j(j-i), g(j)>g(i) \\\\ 1 \\le j \\le M}} \\mu(j) s_j \\\\\n&\\equiv s'_i - \\sum_{\\substack{M \\mid j(j-i), g(j)>g(i) \\\\ 1 \\le j \\le M}} \\mu(j) s_j \\\\\n&= t'_i - \\sum_{\\substack{M \\mid j(j-i), g(j)>g(i) \\\\ 1 \\le j \\le M}} \\mu(j) t_j \\\\\n&\\equiv \\sum_{\\substack{M \\mid j(j-i), g(j)=g(i) \\\\ 1 \\le j \\le M}} \\mu(j) t_j.\n\\end{align*}\n$$\n\nHere, $M \\mid j(j - i)$ implies $M/g(j) \\mid (j - i)$. Also, $g(j) = g(i)$ implies $g(j) \\mid (j - i)$. Since $g(j)$ and $M/g(j)$ are coprime, $M/g(j) \\mid (j - i)$ and $g(j) \\mid (j - i)$ mean $j = i$ under the condition $1 \\le j \\le M$. Hence the condition $s'_i = t'_i$ reduces to $s_i = t_i$, which contradicts the assumption that $s_i \\ne t_i$.\n\nThis concludes the proof of Lemma 2. $\\Box$",
          "pages": [
            "P0",
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Lemma 2. The following two properties hold:\n\n(1) For any good tuple $(s_i)$, there exists exactly one child.\n\n(2) For any good tuple $(s_i)$, there exists exactly one good tuple whose inverse is $(s_i)$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_6871241e3617",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Let $a_{n+1} = a_1$, $a_0 = a_n$, and let $M$ and $m$ denote the maximum and minimum values of $a_1, a_2, \\dots, a_n$, respectively. Remark that the maximum and minimum values of $a_1 - 2a_2, a_2 - 2a_3, \\dots, a_n - 2a_1$ are also $M$ and $m$, respectively. Take $s$ satisfying $a_s = m$. Then, from $M \\ge a_{s-1} - 2a_s \\ge m - 2m$, we have $M + m \\ge 0$. Therefore, if we choose $t$ satisfying $a_t = M$, then from $a_{t-1} - 2a_t \\ge m$, it follows that $a_{t-1} \\ge 2a_t + m = 2M + m \\ge M$, implying $a_{t-1} = M$. Hence, by induction, we conclude that $a_i = M$ for any $i$. Consequently, from the assumption, we have $M = M - 2M$, which implies $M = 0$. Thus, it is necessary for $a_i = 0$ for any $i$. Conversely, the problem assumption is satisfied for this case. Therefore, the solution is $(a_1, a_2, \\dots, a_n) = (0, 0, \\dots, 0)$.\n\n\\textbf{Another Solution.} Let $a_{n+1} = a_1$, then from the assumption, we have:\n\n$$\n\\begin{align*} \n0 &= \\sum_{i=1}^{n} (a_i - 2a_{i+1})^2 - \\sum_{i=1}^{n} a_i^2 \\\\\n&= \\sum_{i=1}^{n} a_i^2 - 4 \\sum_{i=1}^{n} a_i a_{i+1} + 4 \\sum_{i=1}^{n} a_{i+1}^2 - \\sum_{i=1}^{n} a_i^2 \\\\\n&= 2 \\left( \\sum_{i=1}^{n} a_i^2 - 2 \\sum_{i=1}^{n} a_i a_{i+1} + \\sum_{i=1}^{n} a_{i+1}^2 \\right) \\\\\n&= 2 \\sum_{i=1}^{n} (a_i - a_{i+1})^2 \n\\end{align*}\n$$\n\nHence, $a_1 = a_2 = \\dots = a_n$. The subsequent steps are the same as the main solution.",
          "pages": [
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let $n \\ge 2$ be an integer. Find all sets of real numbers $(a_1, a_2, \\dots, a_n)$ such that $a_1 - 2a_2, a_2 - 2a_3, \\dots, a_{n-1} - 2a_n, a_n - 2a_1$ is a permutations of $a_1, a_2, \\dots, a_n$. Note that $a_1, a_2, \\dots, a_n$ itself is also a permutation of $a_1, a_2, \\dots, a_n$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_167ca76846f6",
      "language": "und",
      "page numbers": [
        0,
        1,
        2
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "We prove that the function $f(n) = n$ is the unique function satisfying the condition in the problem. It is easy to see that this $f$ satisfies the condition in the problem.\n\nSuppose that $f$ is the function that satisfies the condition in the problem. First, for any positive integer $k$, we prove that $f(k)$ is a multiple of $k$. Let $r$ be the remainder when dividing $f(k)$ by $k$. Substituting $m = k$ and $n = k - r + 1$ into the equation in the problem, we obtain\n\n$$\n\\operatorname{lcm}(k, f(k + f(k - r + 1))) = \\operatorname{lcm}(f(k), f(k) + k - r + 1).\n$$\n\nTherefore, $\\operatorname{lcm}(f(k), f(k) + k - r + 1)$ is a multiple of $k$. Here, $f(k) + k - r + 1$ leaves a remainder of $1$ when divided by $k$, and hence, $f(k) + k - r + 1$ is coprime to $k$. Therefore, we conclude that $f(k)$ is a multiple of $k$.\n\nLet $m$ be a positive integer. We prove that $f(m) = m$. Substituting $n = f(m)$ into the equation in the problem, we get\n\n$$\n\\text{lcm}(m, f(m + f(f(m)))) = \\text{lcm}(f(m), 2f(m)) = 2f(m).\n$$\n\nTherefore, $2f(m)$ is a multiple of $f(m + f(f(m)))$. Since $f(m + f(f(m)))$ is a multiple of $m + f(f(m))$, $2f(m)$ is a multiple of $m + f(f(m))$. Note that we have\n\n$$\n2f(m) \\le 2f(f(m)) < 2(m + f(f(m))).\n$$\n\nHere, the first inequality follows from the fact that $f(f(m))$ is a multiple of $f(m)$. Therefore, we conclude that $2f(m) = m + f(f(m))$. Since\n\n$$\nf(f(m)) = 2f(m) - m < 2f(m)\n$$\n\nand $f(f(m))$ is a multiple of $f(m)$, we conclude that $f(f(m)) = f(m)$. Hence, we have $2f(m) = m + f(m)$, and hence $f(m) = m$. We complete the proof.",
          "pages": [
            "P1",
            "P2"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let $N$ denote the set of positive integers. Find all functions $f : N \\to N$ such that the equation\n\n$$\n\\text{lcm}(m, f(m + f(n))) = \\text{lcm}(f(m), f(m) + n)\n$$\n\nholds for any positive integers $m$ and $n$. Here, for positive integers $x$ and $y$, $\\text{lcm}(x, y)$ denotes their least common multiple."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_9fc075fc84c8",
      "language": "und",
      "page numbers": [
        0,
        2
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Let us call a good point on $x = 1$ or $x = 2000$ excluding $(1, 1)$ a special point. Consider Z-shaped polyline $ABCD$ and let $A(x_1, y_1)$, $B(x_2, y_2)$, $C(x_3, y_3)$, $D(x_4, y_4)$. Since $1 \\le x_1 < x_2 \\le 2000$, $1 \\le x_3 < x_2 \\le 2000$ and $1 \\le x_3 < x_4 \\le 2000$, any special point on Z-shaped polyline $ABCD$ coincides with either $A$, $B$, $C$ or $D$. Assume that both $B$ and $C$ are special points. Then $x_2 = 2000$, $y_2 \\le 2000$, $x_3 = 1$ and $y_3 \\ge 2$ holds. Therefore we have $y_2 - x_2 \\le 2000 - 2000 < 2 - 1 \\le y_3 - x_3$, which contradicts the condition $y_2 - x_2 = y_3 - x_3$. Therefore at most three special points lie on a Z-shaped polylines, hence we must select at least \\frac{3999}{3} = 1333$ Z-shaped polylines to meet the condition.\n\nDenote polyline $ABCD$ with $A(x_1, y_1)$, $B(x_2, y_2)$, $C(x_3, y_3)$, $D(x_4, y_4)$ by $(x_1, y_1) - (x_2, y_2) - (x_3, y_3) - (x_4, y_4)$. Define Z-shaped polylines $X_1, X_2, \\dots, X_{666}$, $Y_1, Y_2, \\dots, Y_{666}$, $Z$ as following:\n\n* For $k = 1, \\dots, 666$, let $X_k$ be $(1, 1334-k) - (1334-2k, 1334-k) - (1, 1+k) - (2000, 1+k)$.\n\n* For $k = 1, \\dots, 666$, let $Y_k$ be $(1, 2000-k) - (2000, 2000-k) - (667+2k, 667+k) - (2000, 667+k)$.\n\n* Let $Z$ be $(1, 2000) - (2000, 2000) - (1, 1) - (2000, 1)$.\n\nNote that any good point on $y = 1, 2000$ lies on $Z$. For $2 \\le k \\le 667$, any good point on $y = k$ lies on $X_{k-1}$. For $1334 \\le k \\le 1999$, any good point on $y = k$ lies on $Y_{2000-k}$. Let $668 \\le k \\le 1333$ and consider good points on $y = k$.\n\n* When $1 \\le x < 2k - 1333$, $(x, k)$ lies on $X_{1334-k}$.\n\n* When $2k - 1333 \\le x < k$, $(x, k)$ lies on $X_{k-x}$.",
          "pages": [
            "P2"
          ],
          "status": "truncated"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let us call a point in the $xy$-plane a good point if each of its coordinates is an integer from 1 to 2000. Let us also call polyline $ABCD$ a Z-shaped polyline if four points $A(x_1, y_1)$, $B(x_2, y_2)$, $C(x_3, y_3)$, $D(x_4, y_4)$ satisfy all the following conditions:\n\n* $A, B, C, D$ are good points.\n\n* $x_1 < x_2, y_1 = y_2$.\n\n* $x_2 > x_3, y_2 - x_2 = y_3 - x_3$.\n\n* $x_3 < x_4, y_3 = y_4$.\n\nDetermine the smallest possible positive integer $n$ such that, there exist Z-shaped polylines $Z_1, Z_2, \\dots, Z_n$ which satisfy the following condition:\n\nAny good point $P$ lies on $Z_i$ for some $1 \\le i \\le n$.\n\nNote that polyline $ABCD$ is the union sets of line segments (including both endpoints) $AB$, $BC$ and $CD$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_a0f6bfff645a",
      "language": "und",
      "page numbers": [
        0
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Let $a_{n+1} = a_1$, then from the assumption, we have:\n\n$$\n\\begin{align*} \n0 &= \\sum_{i=1}^{n} (a_i - 2a_{i+1})^2 - \\sum_{i=1}^{n} a_i^2 \\\\\n&= \\sum_{i=1}^{n} a_i^2 - 4 \\sum_{i=1}^{n} a_i a_{i+1} + 4 \\sum_{i=1}^{n} a_{i+1}^2 - \\sum_{i=1}^{n} a_i^2 \\\\\n&= 2 \\left( \\sum_{i=1}^{n} a_i^2 - 2 \\sum_{i=1}^{n} a_i a_{i+1} + \\sum_{i=1}^{n} a_{i+1}^2 \\right) \\\\\n&= 2 \\sum_{i=1}^{n} (a_i - a_{i+1})^2 \n\\end{align*}\n$$\n\nHence, $a_1 = a_2 = \\dots = a_n$. The subsequent steps are the same as the main solution.",
          "pages": [
            "P0"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let $a_{n+1} = a_1$, $a_0 = a_n$, and let $M$ and $m$ denote the maximum and minimum values of $a_1, a_2, \\dots, a_n$, respectively. Remark that the maximum and minimum values of $a_1 - 2a_2, a_2 - 2a_3, \\dots, a_n - 2a_1$ are also $M$ and $m$, respectively. Take $s$ satisfying $a_s = m$. Then, from $M \\ge a_{s-1} - 2a_s \\ge m - 2m$, we have $M + m \\ge 0$. Therefore, if we choose $t$ satisfying $a_t = M$, then from $a_{t-1} - 2a_t \\ge m$, it follows that $a_{t-1} \\ge 2a_t + m = 2M + m \\ge M$, implying $a_{t-1} = M$. Hence, by induction, we conclude that $a_i = M$ for any $i$. Consequently, from the assumption, we have $M = M - 2M$, which implies $M = 0$. Thus, it is necessary for $a_i = 0$ for any $i$. Conversely, the problem assumption is satisfied for this case. Therefore, the solution is $(a_1, a_2, \\dots, a_n) = (0, 0, \\dots, 0)$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_dc121efafb66",
      "language": "und",
      "page numbers": [
        0,
        1
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "* When $x = k$, $(x, k)$ lies on Z.\n\n* When $k < x \\le 2k - 668$, $(x, k)$ lies on $Y_{x-k}$.\n\n* When $2k - 668 < x \\le 2000$, $(x, k)$ lies on $Y_{k-667}$.\n\nWe have shown that any good point lies on any of $X_1, X_2, \\dots, X_{666}$, $Y_1, Y_2, \\dots, Y_{666}$ and Z.\nTherefore the smallest possible number of Z-shaped polylines is 1333.",
          "pages": [
            "P1"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "Let us call a good point on $x = 1$ or $x = 2000$ excluding $(1, 1)$ a special point. Consider Z-shaped polyline $ABCD$ and let $A(x_1, y_1)$, $B(x_2, y_2)$, $C(x_3, y_3)$, $D(x_4, y_4)$. Since $1 \\le x_1 < x_2 \\le 2000$, $1 \\le x_3 < x_2 \\le 2000$ and $1 \\le x_3 < x_4 \\le 2000$, any special point on Z-shaped polyline $ABCD$ coincides with either $A$, $B$, $C$ or $D$. Assume that both $B$ and $C$ are special points. Then $x_2 = 2000$, $y_2 \\le 2000$, $x_3 = 1$ and $y_3 \\ge 2$ holds. Therefore we have $y_2 - x_2 \\le 2000 - 2000 < 2 - 1 \\le y_3 - x_3$, which contradicts the condition $y_2 - x_2 = y_3 - x_3$. Therefore at most three special points lie on a Z-shaped polylines, hence we must select at least \\(\\frac{3999}{3} = 1333\\) Z-shaped polylines to meet the condition.\n\nDenote polyline $ABCD$ with $A(x_1, y_1)$, $B(x_2, y_2)$, $C(x_3, y_3)$, $D(x_4, y_4)$ by $(x_1, y_1) - (x_2, y_2) - (x_3, y_3) - (x_4, y_4)$. Define Z-shaped polylines $X_1, X_2, \\dots, X_{666}$, $Y_1, Y_2, \\dots, Y_{666}$, $Z$ as following:\n\n* For $k = 1, \\dots, 666$, let $X_k$ be $(1, 1334-k) - (1334-2k, 1334-k) - (1, 1+k) - (2000, 1+k)$.\n\n* For $k = 1, \\dots, 666$, let $Y_k$ be $(1, 2000-k) - (2000, 2000-k) - (667+2k, 667+k) - (2000, 667+k)$.\n\n* Let $Z$ be $(1, 2000) - (2000, 2000) - (1, 1) - (2000, 1)$.\n\nNote that any good point on $y = 1, 2000$ lies on $Z$. For $2 \\le k \\le 667$, any good point on $y = k$ lies on $X_{k-1}$. For $1334 \\le k \\le 1999$, any good point on $y = k$ lies on $Y_{2000-k}$. Let $668 \\le k \\le 1333$ and consider good points on $y = k$.\n\n* When $1 \\le x < 2k - 1333$, $(x, k)$ lies on $X_{1334-k}$.\n\n* When $2k - 1333 \\le x < k$, $(x, k)$ lies on $X_{k-x}$."
    },
    {
      "_provenance": {
        "folder": "JPN_2024",
        "pages_map": {
          "P0": "page25.md",
          "P1": "page26.md",
          "P2": "page27.md"
        }
      },
      "author": null,
      "booklet title": "JMO2024 The 34th Japan Mathematical Olympiad　The First Round  The Final Round.pdf",
      "booklet_url": null,
      "competition name": null,
      "copyright_info": null,
      "has_solutions": true,
      "id": "p_85122fce32cb",
      "language": "und",
      "page numbers": [
        0,
        1,
        2
      ],
      "solutions": [
        {
          "images": [],
          "label": null,
          "latex": "Let $g$ denote the greatest common divisor of $ab$ and $cd$. Then, $\\frac{ab}{g}$ and $\\frac{cd}{g}$ are coprime, and $\\frac{ab}{g} \\cdot \\frac{cd}{g} = \\frac{abcd}{g^2}$ is a square number. Hence, there exist positive integers $x$ and $y$ such that $ab = gx^2$ and $cd = gy^2$, and $(\\sqrt{ab} - \\sqrt{cd})^2 = g(x - y)^2$ holds. Since $a \\equiv b \\pmod 4$, we have $ab \\equiv 1 \\pmod 4$, and combined with $x^2 \\equiv 1 \\pmod 4$, this yields $g \\equiv 1 \\pmod 4$. By Lemma 1 and Lemma 2, we can find positive odd integers $p, q, r$ and non-negative integers $\\alpha, \\beta, \\gamma$ satisfying $|a-b| = p \\cdot 2^\\alpha, |c-d| = q \\cdot 2^\\beta$, and $|x-y| = r \\cdot 2^\\gamma$. Remark that\n\n$$\n\\begin{aligned}\n7 \\cdot 2^{2n-1} &= a^2 + b^2 + c^2 + d^2 - 4\\sqrt{abcd} \\\\\n&= (a-b)^2 + (c-d)^2 + 2(\\sqrt{ab} - \\sqrt{cd})^2 \\\\\n&= p^2 \\cdot 2^{2\\alpha} + q^2 \\cdot 2^{2\\beta} + gr^2 \\cdot 2^{2\\gamma+1}\n\\end{aligned}\n$$\n\nholds. $p^2 \\equiv q^2 \\equiv 1 \\pmod 8$, $gr^2 \\equiv 1 \\pmod 4$ imply a contradiction by the following lemma.\n\n**Lemma3.** There exist no non-negative integers $\\alpha, \\beta, \\gamma$, positive integers $n, s, t, u$ such that $s \\equiv t \\equiv 1 \\pmod 8$, $u \\equiv 1 \\pmod 4$, and\n\n$$\ns \\cdot 2^{2\\alpha} + t \\cdot 2^{2\\beta} + u \\cdot 2^{2\\gamma+1} = 7 \\cdot 2^{2n-1}.\n$$\n\n**Proof.** By the symmetry of $(\\alpha, s)$ and $(\\beta, t)$, we can assume $\\alpha \\le \\beta$.\n\n* case when $\\alpha \\le \\gamma$\n\nSince $s+t \\cdot 2^{2(\\beta-\\alpha)} + u \\cdot 2^{2(\\gamma-\\alpha)+1} = 7 \\cdot 2^{2(n-\\alpha)-1}$ is a positive integer, we must have $n-\\alpha \\ge 1$. Therefore, both $u \\cdot 2^{2(\\gamma-\\alpha)+1}$ and $7 \\cdot 2^{2(n-\\alpha)-1}$ are even, implying that $s+t \\cdot 2^{2(\\beta-\\alpha)}$ is even as well, and consequently, $\\alpha = \\beta$. Since $s+t \\cdot 2^0$ cannot be divisible by 4, we obtain either $\\gamma-\\alpha = 0$ or $n-\\alpha = 1$. In the former case, $7 \\cdot 2^{2(n-\\alpha)-1} = s+t+2u \\equiv 4 \\pmod 8$, leading to a contradiction. In the latter case, $u \\cdot 2^{2(\\gamma-\\alpha)+1} = 14-s-t \\equiv 4 \\pmod 8$, which also contradicts the conditions.\n\n* case when $\\gamma < \\alpha$\n\nSince $s \\cdot 2^{2(\\alpha-\\gamma)} + t \\cdot 2^{2(\\beta-\\gamma)} + 2u = 7 \\cdot 2^{2(n-\\gamma)-1}$ has a remainder of 2 when divided by 4, we must have $n-\\gamma = 1$. In this case, $2^{2(\\beta-\\gamma)} < 14$, implying $\\alpha-\\gamma \\le \\beta-\\gamma \\le 1$, which leads to $\\alpha-\\gamma = \\beta-\\gamma = 1$. Therefore, we have $2s+2t+u = 7$, but $2s+2t+u \\equiv 1 \\pmod 4$, which is a contradiction.\n\nTherefore we have proved the lemma.\n\nTherefore, there are no solutions $(a, b, c, d, n)$.",
          "pages": [
            "P2"
          ],
          "status": "complete"
        }
      ],
      "statement_images": [],
      "statement_latex": "5. Assume the existence of a positive integer solution $(a, b, c, d, n)$ such that $a^2 + b^2 + c^2 + d^2 - 4\\sqrt{abcd} = 7 \\cdot 2^{2n-1}$, and take the one with the minimum value of $n$. Since $\\sqrt{abcd}$ is rational, $abcd$ must be a square number. First, we establish the following two lemmas. Note that $a^2 + b^2 + c^2 + d^2 - 4\\sqrt{abcd} = (a-b)^2 + (c-d)^2 + 2(\\sqrt{ab} - \\sqrt{cd})^2$.\n\n**Lemma1.** $a, b, c, d$ are all distinct from each other.\n\n**Proof.** From the symmetry of $a, b, c, d$, it suffices to assume $a = b$ and derive a contradiction. Since $abcd = a^2cd$ is a square number, $cd$ must also be a square number. Therefore, both $M = c - d$ and $N = a - \\sqrt{cd}$ are integers, and we have $M^2 + 2N^2 = 7 \\cdot 2^{2n-1}$. Since the residues of square numbers divided by 7 are 0, 1, 2, or 4, the residues of $M^2$ and $2N^2$ when divided by 7 must also be 0, 1, 2, or 4. Since their sum is a multiple of 7, both $M$ and $N$ must be multiples of 7. Therefore, $M^2 + 2N^2$ is a multiple of 49. However, $7 \\cdot 2^{2n-1}$ is not a multiple of 49, which is a contradiction. \\u25a0\n\n**Lemma2.** The product of any two numbers among $a, b, c, d$ is different from the product of the remaining two numbers.\n\n**Proof.** From the symmetry of $a, b, c, d$, we only need to derive a contradiction by assuming $ab = cd$. Let $M = a - b$ and $N = c - d$, then $M$ and $N$ are integers, and $M^2 + N^2 = 7 \\cdot 2^{2n-1}$ holds. Because the residues of square numbers divided by 7 can only be 0, 1, 2, or 4, as mentioned in Lemma 1, both $M$ and $N$ must be multiples of 7. Therefore, $M^2 + N^2$ is a multiple of 49, but $7 \\cdot 2^{2n-1}$ is not, leading to a contradiction. \\u25a0\n\nConsider cases based on the value of $n$.\n\n(1) $n = 1$\n\nBy the symmetry of $a, b, c, d$ and Lemma 1, we can assume that $a < b < c < d$. From $(d-a)^2 + (c-b)^2 + 2(\\sqrt{ad} - \\sqrt{bc})^2 = 14$, we have $d-a \\le \\sqrt{14} < 4$, implying $a = b-1 = c-2 = d-3$. We also get $bc = a^2 + 3a + 2 = ad + 2$ and consequently $\\sqrt{ad} + 2 - \\sqrt{ad} = \\sqrt{2}$, which leads to a contradiction since $a$ and $d$ are positive.\n\n(2) $n > 1$\n\nWhen $a, b, c, d$ are all even, $(\\frac{a}{2}, \\frac{b}{2}, \\frac{c}{2}, \\frac{d}{2}, n-1)$ satisfies the given equation, contradicting the minimality of $n$. Therefore, at least one of $a, b, c, d$ is odd. Since the residues of square numbers divided by 4 are 0 or 1, and $a^2 + b^2 + c^2 + d^2 = 7 \\cdot 2^{2n-1} + 4\\sqrt{abcd}$ is divisible by 4, all of $a, b, c, d$ are odd. Since $abcd$ is an odd square number, $abcd \\equiv 1 \\pmod 4$, implying that there are an even number of elements among $a, b, c, d$ that leave a remainder of 3 when divided by 4. Thus, without loss of generality, we can assume $a \\equiv b \\pmod 4$ and $c \\equiv d \\pmod 4$. Let $g$ denote the greatest common divisor of $ab$ and $cd$. Then, $\\frac{ab}{g}$ and $\\frac{cd}{g}$ are coprime, and $\\frac{ab}{g} \\cdot \\frac{cd}{g} = \\frac{abcd}{g^2}$ is a square number. Hence, there exist positive integers $x$ and $y$ such that $ab = gx^2$ and $cd = gy^2$, and $(\\sqrt{ab} - \\sqrt{cd})^2 = g(x - y)^2$ holds. Since $a \\equiv b \\pmod 4$, we have $ab \\equiv 1 \\pmod 4$, and combined with $x^2 \\equiv 1 \\pmod 4$, this yields $g \\equiv 1 \\pmod 4$. By Lemma 1 and Lemma 2, we can find positive odd integers $p, q, r$ and non-negative integers $\\alpha, \\beta, \\gamma$ satisfying $|a-b| = p \\cdot 2^\\alpha, |c-d| = q \\cdot 2^\\beta$, and $|x-y| = r \\cdot 2^\\gamma$. Remark that\n\n$$\n\\begin{aligned}\n7 \\cdot 2^{2n-1} &= a^2 + b^2 + c^2 + d^2 - 4\\sqrt{abcd} \\\\\n&= (a-b)^2 + (c-d)^2 + 2(\\sqrt{ab} - \\sqrt{cd})^2 \\\\\n&= p^2 \\cdot 2^{2\\alpha} + q^2 \\cdot 2^{2\\beta} + gr^2 \\cdot 2^{2\\gamma+1}\n\\end{aligned}\n$$\n\nholds. $p^2 \\equiv q^2 \\equiv 1 \\pmod 8$, $gr^2 \\equiv 1 \\pmod 4$ imply a contradiction by the following lemma.\n\n**Lemma3.** There exist no non-negative integers $\\alpha, \\beta, \\gamma$, positive integers $n, s, t, u$ such that $s \\equiv t \\equiv 1 \\pmod 8$, $u \\equiv 1 \\pmod 4$, and\n\n$$\ns \\cdot 2^{2\\alpha} + t \\cdot 2^{2\\beta} + u \\cdot 2^{2\\gamma+1} = 7 \\cdot 2^{2n-1}.\n$$\n\n**Proof.** By the symmetry of $(\\alpha, s)$ and $(\\beta, t)$, we can assume $\\alpha \\le \\beta$.\n\n* case when $\\alpha \\le \\gamma$\n\nSince $s+t \\cdot 2^{2(\\beta-\\alpha)} + u \\cdot 2^{2(\\gamma-\\alpha)+1} = 7 \\cdot 2^{2(n-\\alpha)-1}$ is a positive integer, we must have $n-\\alpha \\ge 1$. Therefore, both $u \\cdot 2^{2(\\gamma-\\alpha)+1}$ and $7 \\cdot 2^{2(n-\\alpha)-1}$ are even, implying that $s+t \\cdot 2^{2(\\beta-\\alpha)}$ is even as well, and consequently, $\\alpha = \\beta$. Since $s+t \\cdot 2^0$ cannot be divisible by 4, we obtain either $\\gamma-\\alpha = 0$ or $n-\\alpha = 1$. In the former case, $7 \\cdot 2^{2(n-\\alpha)-1} = s+t+2u \\equiv 4 \\pmod 8$, leading to a contradiction. In the latter case, $u \\cdot 2^{2(\\gamma-\\alpha)+1} = 14-s-t \\equiv 4 \\pmod 8$, which also contradicts the conditions.\n\n* case when $\\gamma < \\alpha$\n\nSince $s \\cdot 2^{2(\\alpha-\\gamma)} + t \\cdot 2^{2(\\beta-\\gamma)} + 2u = 7 \\cdot 2^{2(n-\\gamma)-1}$ has a remainder of 2 when divided by 4, we must have $n-\\gamma = 1$. In this case, $2^{2(\\beta-\\gamma)} < 14$, implying $\\alpha-\\gamma \\le \\beta-\\gamma \\le 1$, which leads to $\\alpha-\\gamma = \\beta-\\gamma = 1$. Therefore, we have $2s+2t+u = 7$, but $2s+2t+u \\equiv 1 \\pmod 4$, which is a contradiction.\n\nTherefore we have proved the lemma.\n\nTherefore, there are no solutions $(a, b, c, d, n)$."
    }
  ]
}